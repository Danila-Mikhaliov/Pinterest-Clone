(() => { 'use strict'; const e = [{ title: 'Spam', subtitle: 'Misleading or repetitive posts', id: 111 }, { title: 'Nudity or pornography', subtitle: 'Misleading or repetitive posts', id: 222 }, { title: 'Self-mutilation', subtitle: 'Eating disorders, self-injury, suicide', id: 333 }, { title: 'Fake information', subtitle: 'False information about health, climate, voting or conspiracy theory', id: 444 }, { title: 'Aggressive actions', subtitle: 'Prejudices, stereotypes, white supremacy, insults', id: 555 }, { title: 'Dangerous Goods', subtitle: 'Drugs, weapons, regulated goods', id: 666 }]; const t = [{ title: 'Desk 1', id: '777' }, { title: 'Desk 2', id: '888' }, { title: 'Desk 3', id: '999' }]; function n (e, n) { const a = document.createElement('div'); a.className = 'modal-select-desk', a.id = event.target.parentNode.id; const c = document.createElement('h2'); c.className = 'modal__title', c.innerText = 'Complain'; const o = document.createElement('form'); o.className = 'modal__form'; const s = document.createElement('ul'); s.className = 'modal__list'; const d = n.map(({ title: e, subtitle: t, id: n }) => { const a = document.createElement('li'); a.className = 'modal__list-item'; const c = document.createElement('input'); c.className = 'modal__list-item-checkbox', c.type = 'checkbox', c.id = n; const o = document.createElement('label'); if (o.className = 'modal__list-item-name', o.innerText = e, t) { const e = document.createElement('div'); return e.className = 'modal__list-item-subtitle', e.innerText = `${t}`, a.append(c, o, e), a } return a.append(c, o), a }); const i = document.createElement('div'); i.className = 'modal__btn-content'; const r = document.createElement('button'); r.className = 'modal__send-btn', r.innerText = 'Send'; const l = document.createElement('button'); return l.className = 'modal__close-btn', l.innerText = 'Close', l.addEventListener('click', () => { e.remove() }), i.append(r, l), r.addEventListener('click', () => { const n = document.querySelectorAll('.modal__list-item-checkbox'); const c = a.id; new Array(...n).filter(e => e.checked).map(e => { const [n] = t.filter(({ id: t }) => e.id === t); return n?.title }).forEach(e => { const t = JSON.parse(localStorage.getItem(e)) || []; t.push(c), localStorage.setItem(e, JSON.stringify(t)) }), e.remove() }), s.append(...d), o.append(s, i), a.append(c, o), a } function a (a) { const c = document.createElement('div'); c.classList.add('modal-overlay'); const o = a.target.parentNode; const s = document.createElement('div'); s.classList.add('modal'), s.id = o.id, c.append(s), document.body.appendChild(c), c.addEventListener('click', e => { e.target === c && e.target.remove() }); const d = a.target.dataset.card; d === 'one' ? s.append(n(c, t)) : d === 'two' && s.append(n(c, e)) } function c (e) { const t = e.target.parentNode; const n = document.createElement('div'); n.id = t.id, n.classList.add('card-content-menu-active'); const c = document.createElement('button'); c.type = 'button', c.classList = 'card-btn-add-drop card__btn', c.innerText = 'Add to desk', c.dataset.card = 'one'; const o = document.createElement('button'); o.type = 'button', o.classList = 'card-btn-complain card__btn', o.innerText = 'Complain', o.dataset.card = 'two', n.append(c, o), t.append(n), c.addEventListener('click', a), o.addEventListener('click', a); const s = e => { e.target.parentNode.id !== t.id && (n.remove(), window.removeEventListener('click', s)) }; window.addEventListener('click', s), n.addEventListener('click', () => s(e, n)) } function o (e, t = r.result) { const n = document.createElement('div'); n.classList.add('modal-overlay'); const a = e.target.parentNode; const c = document.createElement('div'); c.classList.add('modal'), c.id = a.id; const o = t.find(e => e.id === a.id); const s = document.createElement('img'); s.className = 'card-modal-image', s.src = o.image; const d = document.createElement('div'); d.className = 'card-modal-info'; const i = document.createElement('p'); i.className = 'card-modal-title', i.textContent = o.title; const l = document.createElement('div'); l.className = 'card-modal-author'; const m = document.createElement('img'); m.className = 'card-modal-author-avatar', m.src = o.avatar; const u = document.createElement('p'); u.className = 'card-modal-author-name', u.textContent = o.name; const p = document.createElement('div'); p.className = 'container-modal', l.append(m, u), d.append(i, l), p.append(s, d), c.append(p), n.append(c), document.body.appendChild(n), n.addEventListener('click', e => { e.target === n && e.target.remove() }) } const s = document.querySelector('.container'); const d = document.querySelector('.container'); function i (e) { d.innerHTML = '', e.forEach(({ name: e, avatar: t, image: n, id: a, title: d }) => (function (e, t, n, a, d) { const i = document.createElement('div'); i.className = 'card', i.id = a; const r = document.createElement('button'); r.addEventListener('click', o), r.className = 'open-card', r.innerText = 'See more...'; const l = document.createElement('img'); l.src = n, l.className = 'card-image', l.alt = 'A windmill'; const m = document.createElement('button'); m.className = 'card-content-menu', m.addEventListener('click', c); const u = document.createElement('p'); u.innerText = d, u.className = 'card-title'; const p = document.createElement('div'); p.className = 'card-author'; const E = document.createElement('img'); E.className = 'card-author-icon', E.src = t; const v = document.createElement('p'); v.className = 'card-author-name', v.innerText = e, p.append(E, v), i.append(l, m, r, u, p), s.append(i) }(e, t, n, a, d))) } const r = {}; function l (e = r.result) { const t = localStorage.getItem('DESK') || 'Home'; if (t === 'Home') return void i(e); const n = JSON.parse(localStorage.getItem(t)) || []; i(e.filter(({ id: e }) => n.includes(e))) } async function m (e, t) { const n = document.querySelector('.container'); const a = document.createElement('div'); a.innerHTML = 'Not Found'; const c = e?.target?.value || t; const o = r.result?.filter(e => e.title.toLowerCase().includes(c.toLowerCase())); n.innerHTML = '', o.length > 0 ? l(o) : n.append(a) } const u = ['Cars', 'Memes', 'Sport', 'Movie', 'Abstract']; function p () { const e = document.querySelector('.header-search__input'); e.id = 'inputId'; const t = document.createElement('div'); t.className = 'container__queries', t.id = 'dropdownId', t.style.display = 'none', e.after(t); const n = document.createElement('h2'); n.className = 'queries__title', n.innerText = 'Popular queries'; const a = document.createElement('ul'); a.className = 'queries__list', t.append(n, a), u.forEach(t => { !(async function (e, t, n) { const a = document.createElement('li'); a.className = 'queries__list-item'; const c = document.createElement('button'); c.className = 'queries__list-item-button', c.innerText = e, t.append(c), t.append(a), c.addEventListener('click', () => { n.value = e, m(void 0, e) }) }(t, a, e)) }), e.addEventListener('focus', () => { t.style.display = 'block' }); e.addEventListener('input', e => { t.style.display = e.target.value.length > 0 ? 'none' : 'block', m(e) }), window.addEventListener('click', n => { n.target.parentNode.id !== t.id && n.target.id !== e.id && (t.style.display = 'none') }) } function E () { const e = localStorage.getItem('DESK') || 'Home'; const t = document.querySelector('.dropdown'); const n = t.querySelector('.dropdown__select'); const a = t.querySelector('.select__caret'); const c = t.querySelector('.dropdown__menu'); const o = t.querySelectorAll('.menu__item'); const s = t.querySelector('.select__selected'); s.innerHTML = e, o.forEach(t => { t.innerHTML === e && t.classList.add('active') }), n.addEventListener('click', function () { n.classList.toggle('select-clicked'), a.classList.toggle('select__caret-rotate'), c.classList.toggle('dropdown__menu-open') }), o.forEach(e => (function (e) { e.addEventListener('click', () => { const t = document.getElementById('inputId'); const o = e.innerText; s.innerText = o, n.classList.remove('select-clicked'), a.classList.remove('select__caret-rotate'), c.classList.remove('dropdown__menu-open'), t.value = '', localStorage.setItem('DESK', o), l() }) }(e))), o.forEach(e => (function (e) { e.classList.remove('active'), e.classList.add('active') }(e))) } async function v () { const e = document.querySelector('.spinner'); e.toggleAttribute('hidden', !1); const t = await fetch('https://63e2831e109336b6cb097eba.mockapi.io/api/pinterest/pinterest-clone').then(e => e.json()).then(e => e).then(e => e.sort(() => Math.random() - 0.5)).finally(() => e.toggleAttribute('hidden', !0)); r.result = t, l(t) }window.addEventListener('DOMContentLoaded', () => { E() }), v(), p() })()
